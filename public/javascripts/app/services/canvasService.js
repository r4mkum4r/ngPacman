// Generated by CoffeeScript 1.7.1
var gameCanvas;

gameCanvas = (function() {
  var canvas, newY, player;

  gameCanvas.scope = '';

  canvas = '';

  newY = 0;

  player = {};

  function gameCanvas() {}

  gameCanvas.prototype.init = function() {
    this.socket = io.connect();
    this.socket.on('createPlayer', function(playerId) {
      return player.id = playerId;
    });
    this.socket.on('moveClient', function(posY, id) {
      if (player.id === id) {
        canvas.clearRect(0, newY, 10, 50);
        newY += posY;
        return canvas.fillRect(0, newY, 10, 50);
      } else {
        canvas.clearRect(200, newY, 10, 50);
        newY += posY;
        return canvas.fillRect(200, newY, 10, 50);
      }
    });
    canvas = this.scope.stage.getContext('2d');
    canvas.fillRect(0, 0, 10, 50);
    return canvas.fillRect(200, 0, 10, 50);
  };

  gameCanvas.prototype.updatePlayer = function(y) {
    this.socket.emit('clientMoved', y);
    canvas.clearRect(0, newY, 10, 50);
    newY += y;
    return canvas.fillRect(0, newY, 10, 50);
  };

  return gameCanvas;

})();

angular.module('pacman.services').service('canvasService', gameCanvas);
